
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.2">
    
    
      
        <title>Q1: Solution and Afterthoughts - Everything About 3DC</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.19190aaf.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.24b84193.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#q1-solution-and-afterthoughts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Everything About 3DC" class="md-header-nav__button md-logo" aria-label="Everything About 3DC">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Everything About 3DC
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Q1: Solution and Afterthoughts
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/3DCdsc/About/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    3DCdsc/About
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Everything About 3DC" class="md-nav__button md-logo" aria-label="Everything About 3DC">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Everything About 3DC
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/3DCdsc/About/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    3DCdsc/About
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      About 3DC
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../3DC_Membership/" class="md-nav__link">
      How to Become a 3DC Member
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Join_3DC_Core/" class="md-nav__link">
      How to Join 3DC Core Team
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Workshop_2020/" class="md-nav__link">
      Workshops in 2020
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../recess_week_challenge/" class="md-nav__link">
      Recess Week Challenge 2020: A Minecraft Story
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../workshop_guide/" class="md-nav__link">
      Guide to Host Your First Workshop with 3DC
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Recess Week Challenge Stuff
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Recess Week Challenge Stuff" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Recess Week Challenge Stuff
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cloud_based_lab/" class="md-nav__link">
      Recess Week Challenge Cloud-Based Lab: Sheep-as-a-Service (SaaS)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/" class="md-nav__link">
      Recess Week Challenge Hackerrank Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../q1_hints/" class="md-nav__link">
      Q1 Hints
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Q1: Solution and Afterthoughts
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Q1: Solution and Afterthoughts
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#straightforward-and-naive" class="md-nav__link">
    Straightforward (and Naive)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-problem-with-the-naive-apporach" class="md-nav__link">
    The problem with the naive apporach
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-better-approach" class="md-nav__link">
    A better approach
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#efficiency-of-improved-algorithm" class="md-nav__link">
    Efficiency of improved algorithm
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../q2_sol/" class="md-nav__link">
      Q2: Solution and Afterthoughts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../q3_hints/" class="md-nav__link">
      Q3 Hints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../q3_sol/" class="md-nav__link">
      Q3: Solution and Afterthoughts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../q4_hints/" class="md-nav__link">
      Final Question Hints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../teaser_hints/" class="md-nav__link">
      Teaser Hints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../teaser_sols/" class="md-nav__link">
      Teaser Solutions (SPOILER!)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#straightforward-and-naive" class="md-nav__link">
    Straightforward (and Naive)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-problem-with-the-naive-apporach" class="md-nav__link">
    The problem with the naive apporach
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-better-approach" class="md-nav__link">
    A better approach
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#efficiency-of-improved-algorithm" class="md-nav__link">
    Efficiency of improved algorithm
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/3DCdsc/About/edit/master/docs/Recess_Week_Challenge_Stuff/q1_sol.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="q1-solution-and-afterthoughts">Q1: Solution and Afterthoughts<a class="headerlink" href="#q1-solution-and-afterthoughts" title="Permanent link">#</a></h1>
<p><img alt="" src="../../imgs/wheat_farm.png" /></p>
<p>Steve's Wheat Farm is arguably the most difficult problem in the entire recess week challenge, so much that Q2 was made easier to allow participants more time to solve Q1.</p>
<p>However, Steve's Wheat Farm is actually not that difficult of a problem if approached correctly. There is really only one advanced programming concept: The Prefix Sum Array (Refer to hints on what is a Prefix Sum Array).</p>
<h2 id="straightforward-and-naive">Straightforward (and Naive)<a class="headerlink" href="#straightforward-and-naive" title="Permanent link">#</a></h2>
<p>Let us explore the problem step by step. Let's use an example to visualise</p>
<pre>
11
0 0 0 0 3 0 3 0 0 0 0
</pre>

<p>The straightfowrward approach is to </p>
<ol>
<li>Visit each block in order (* denotes the current block we are on)</li>
<li>If there is a light source on that block</li>
<li>Add the brightness to that block (we shall just skip to the first light source)</li>
<li>To the block to the right of the current block, add brightness level of the source block, subtracted by 1.</li>
<li>Repeat this process as we continue going right, subtracting 1 more each time until we reach brightness level 0, or there are no more blocks on the right.</li>
<li>Repeat above steps for the right side of the block.</li>
</ol>
<p>After visiting the first light source:</p>
<pre>
0 0 <b>1 2 3 2 4</b> 0 0 0 0
</pre>

<p>After visiting the second light source:</p>
<pre>
0 0 1 2 <b>4 4 4 2 1 </b>0 0
</pre>

<p>This gives us a time complexity of <span class="arithmatex">\(O(n * B_{max})\)</span>, where <span class="arithmatex">\(n\)</span> is the number of blocks and <span class="arithmatex">\(B_{max}\)</span> is the max brightness level of a source.</p>
<details>
<summary> Naive approach in Python3 </summary>

<div class="highlight"><pre><span></span><code><span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
<span class="n">brightness</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>

<span class="n">raws</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>  <span class="c1"># Store the source inputs in an array</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="c1"># Iterate through source inputs, and add them to the final brightness array.</span>
  <span class="n">source</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">raws</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
  <span class="n">brightness</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">source</span>
  <span class="n">d</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Represents the current distance away from the source</span>
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">source</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="c1"># Decrement brightness level by 1 for each block away from source</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
      <span class="c1"># If the dth block on right side of the source block is within the given blocks</span>
      <span class="c1"># Add brightness level due to source block at that block</span>
      <span class="n">brightness</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">d</span><span class="p">]</span> <span class="o">+=</span> <span class="n">j</span>

    <span class="k">if</span> <span class="n">i</span> <span class="o">-</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
      <span class="c1"># If dth block on left side of the source block is within the given blocks</span>
      <span class="c1"># Add brightness level due to source block at that block</span>
      <span class="n">brightness</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">d</span><span class="p">]</span> <span class="o">+=</span> <span class="n">j</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># Increment distance at each iteration</span>

<span class="c1"># Now loop through the array to find the number of blocks that meet</span>
<span class="c1"># the optimal brightness condition</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">brightness</span><span class="p">:</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">source</span> <span class="o">&gt;=</span> <span class="mi">10000</span> <span class="ow">and</span> <span class="n">source</span> <span class="o">&lt;=</span> <span class="mi">30000000</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
</code></pre></div>

</details>

<h2 id="the-problem-with-the-naive-apporach">The problem with the naive apporach<a class="headerlink" href="#the-problem-with-the-naive-apporach" title="Permanent link">#</a></h2>
<p>We are potentially visiting each block so many times if every block has a source of <span class="arithmatex">\(B_{max}\)</span> brightness level. In particular, the step where we "spread" out the light from the light source is incredibly repetitive. is there a way to do things better?</p>
<h2 id="a-better-approach">A better approach<a class="headerlink" href="#a-better-approach" title="Permanent link">#</a></h2>
<p>We can use the prefix sum array approach, where we "jot down" the main parameters for the operations that we will need to perform later. For example for any given light source, we can describe its impact on the result array by breaking it down into a few segments:</p>
<ul>
<li>The resultant brightness level at any block is the arithmetic sum of the individual resultant brightness levels due to individual light sources around it (something like superposition)</li>
<li>The resultant brightness level of a block due to a source falls off over distance.</li>
<li>Conversely, we can rephrase the above statement to: (Taking a left-to-right approach) The resultant brightness level of a block due to a source increases (by 1 per block) as we approach the source, and falls back down(by 1 per block) to zero as we get further away from the source.</li>
<li>Of course, take note the resultant brightness level of a block due to a source can never be less than zero.</li>
<li>This means that at <span class="arithmatex">\(brightnesslevel\)</span> distance to the left of the source, we should start to increase the brightness level by 1 every block</li>
<li>Notice that in terms of a prefix sum array, this can be represented by adding +1 to the first block where the brightness level is non-zero (initalise a new array first)</li>
</ul>
<p>Adding +1 to the first block where brightness level is non-zero</p>
<pre>
0 0<b> 1 </b>0 <b>1</b> 0 0 0 0 0 0
</pre>
<ul>
<li>Then when we get to the block right after the source, we should reverse this trend (i.e. make it decreasing).</li>
<li>Notice that we can change the prefix sum trend from +1 to -1, by adding -2 to the block right after the light source.</li>
</ul>
<p>Adding -2 to the block to the immediate right of the source:</p>
<pre>
0 0 1 0 1 <b>-2</b> 0 <b>-2</b> 0 0 0
</pre>

<ul>
<li>Eventually, we should stop this decreasing trend right after the block where the brightness level due to this source should become zero.</li>
<li>This means we should counter the -1 prefix sum trend by adding +1 to the block right after where the brightness level due to the light source should become zero.</li>
</ul>
<pre>
0 0 1 0 1 -2 0 -2 <b>1</b> 0 <b>1</b>
</pre>

<p>Note that the step where we add +1 to start the increasing trend, the index of the source may be negative. To fix that, we can</p>
<ul>
<li>Add +1 to the first element of the prefix sum array to denote the increasing trend</li>
<li>Add the brightness level of the first block (due to the current light source) subtracted by 1, to sort of shared <span class="arithmatex">\(base\)</span> variable. We will add this <span class="arithmatex">\(base\)</span> variable back to the array later.</li>
<li>Since we are going from left to right, we don't have to do this treatment for the part on the right of the light source.</li>
</ul>
<p>All that is left now is to evaluate the prefix sum of our array</p>
<pre>
base = 0
0 0 1 1 2 0 0 -2 0 -1 -1 0
</pre>

<ul>
<li>Performing prefix sum once will give us the realised total increasing/decreasing trend for each block.</li>
<li>Add the <span class="arithmatex">\(base\)</span> variable back to the first element of the array, since we are going to evaluate the final total brightness levels due to the starting value and the increasing/decreasing trends now, and we need the starting brightness value at the first block.</li>
<li>Perform prefix sum yet another time on the array. The first element will represent the starting brightness, and apply the trend for the next block at every next block, together with the base value from the previous block.</li>
</ul>
<pre>
0 0 1 2 4 4 4 2 1 0 0
</pre>

<h2 id="efficiency-of-improved-algorithm">Efficiency of improved algorithm<a class="headerlink" href="#efficiency-of-improved-algorithm" title="Permanent link">#</a></h2>
<p>Notice that we only iterate through the array twice, and during the first set of iteration, we perform a maximum of three array-lookup operations (of <span class="arithmatex">\(O(1)\)</span> time complexity) per block, which gives us a total linear time complexity of <span class="arithmatex">\(O(n)\)</span>!</p>
<p>The full solution (Python3) can be found below.</p>
<details>
<summary>Python 3 Full Solution with Prefix Sum</summary>

<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">prefixSum</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
  <span class="c1"># Returns array where each element is the cumulative sum of the elements</span>
  <span class="c1"># up to its current index in the original array</span>
  <span class="n">arr2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
  <span class="n">arr2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
    <span class="n">arr2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr2</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
  <span class="k">return</span> <span class="n">arr2</span>

<span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
<span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>   <span class="c1"># Base Array to perform prefix sum on.</span>

<span class="n">raws</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
<span class="n">base</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Base variable to store the starting value of the array</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="n">source</span> <span class="o">=</span> <span class="n">raws</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
  <span class="k">if</span> <span class="n">source</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
    <span class="c1"># If the source is zero, there is no need to do anything</span>
    <span class="k">continue</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">-</span> <span class="n">source</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="c1"># Check if the first non-zero brightness level block is within the array bounds</span>
    <span class="c1"># If it is within bounds, add +1 to indicate the start of the increasing trend</span>
    <span class="n">sources</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">source</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="c1"># Otherwise, add +1 to the first element of the array to indicate the trend</span>
    <span class="c1"># and also store the starting brightness level at the first block at base variable</span>
    <span class="n">sources</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">base</span> <span class="o">+=</span> <span class="n">source</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>

  <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
    <span class="c1"># If the source is non-zero and not the last block</span>
    <span class="c1"># Indicate that the trend should be reversed at the next block</span>
    <span class="n">sources</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">2</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">source</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
      <span class="c1"># And indicate where this reverse trend should end</span>
      <span class="c1"># This should be where the brightness level decreases to zero</span>
      <span class="n">sources</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">source</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># Prefix Sum once gives us the array of total increasing/decreasing trends at each block</span>
<span class="n">pfSources</span> <span class="o">=</span> <span class="n">prefixSum</span><span class="p">(</span><span class="n">sources</span><span class="p">)</span>
<span class="c1"># Add base back to the array to set our starting value</span>
<span class="n">pfSources</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">base</span>
<span class="c1"># Prefix sum again to apply the trends from the starting value</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">prefixSum</span><span class="p">(</span><span class="n">pfSources</span><span class="p">)</span>
<span class="n">optimal</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Variable to contain number of optimal blocks</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="c1"># To find the actual light level, add light level of each block due to sources</span>
  <span class="c1"># in both directions, then add cumulative falloff at each block in both directions</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">10000</span> <span class="ow">and</span> <span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">30000000</span><span class="p">):</span>
    <span class="n">optimal</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">optimal</span><span class="p">)</span>
</code></pre></div>

</details>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../q1_hints/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Q1 Hints
              </div>
            </div>
          </a>
        
        
          <a href="../q2_sol/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Q2: Solution and Afterthoughts
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../../assets/javascripts/bundle.c1ccee15.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>